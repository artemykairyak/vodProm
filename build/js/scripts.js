"use strict";$(document).ready(function(){function e(){$(".short-header__tabs").slick({slidesToShow:1.5,slidesToScroll:1,focusOnSelect:!0,variableWidth:!0,infinite:!1,arrows:!1,responsive:[{breakpoint:375,settings:{slidesToShow:1.3}}]})}function t(){console.log(1);var e=$(".about__members__nav-count").detach(),t=$(".about__members-team-label").detach(),a=$(".about__members__nav").detach();$(".about__members").prepend(e,t),$(".about__members-team").prepend(a)}function a(){if($(".feedback__slider").length)if($(window).width()>640){var e=document.querySelectorAll(".cards-box");e.forEach(function(e){function t(){o.unshift(o.pop()),r(o)}function a(){o.push(o.shift()),r(o)}var s=e.querySelectorAll(".card:not(.hide)"),o=[];!function(){for(var e=0;s.length>e;)o.push(e++)}();var r=function(e){for(var t=0;t<s.length;t++)s[t].dataset.slide=e[t]};document.querySelector(".feedback__nav-arr_right").addEventListener("click",t),document.querySelector(".feedback__nav-arr_left").addEventListener("click",a),e.addEventListener("click",t),r(o)})}else $(".feedback__slider").removeClass("cards-box"),$(".feedback__slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!1,arrows:!0,prevArrow:$(".feedback__nav-arr_left"),nextArrow:$(".feedback__nav-arr_right")})}function s(e,t){e.forEach(function(e){e.each(function(e,a){$(a).on("mouseenter",function(){$(this).addClass("".concat($(a).attr("class").split(" ")[0],"_").concat(t))}),$(a).on("mouseleave",function(){$(this).removeClass("".concat($(a).attr("class").split(" ")[0],"_").concat(t))})})})}function o(e,t){$(e).length>0&&$(e).each(function(e,a){var s="";$(a).text().trim().length>t&&(s=$(a).text().trim().substr(0,t-1)+"…",$(a).text(s))})}function r(e){var t="http://img.youtube.com/vi/";return t+e.slice(e.lastIndexOf("/")+1,e.indexOf("?"))+"/0.jpg"}function i(e){var t="https://www.youtube.com/embed/",a="?rel=0&showinfo=0&autoplay=1",s=-1===e.indexOf("&",e.indexOf("?")+1)?!1:!0;return s?t+e.slice(e.indexOf("=")+1,e.indexOf("&"))+a:t+e.slice(e.indexOf("=")+1)+a}function c(){ymaps.ready(function(){var e=new ymaps.Map("map",{center:[51.530935892032936,45.99973050859832],zoom:16.5,controls:[]},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark([51.530935892032936,45.99973050859832],{},{iconImageHref:"assets/img/icons/marker.png",iconLayout:"default#image"});e.geoObjects.add(t),e.container.fitToViewport()})}function l(){var e=new Set,t=$(".calculate-form__checkbox-table:first"),a=$(".calculate-form__checkbox-table:last"),s=$(".calculate-form__inputs-input-container"),o=$(".calculate-form__message-input");return t.find($(".calculate-form__checkbox-input:checked")).length?t.removeClass("calculate-form_error"):(t.addClass("calculate-form_error"),e.add("radio")),a.find($(".calculate-form__checkbox-input:checked")).length?a.removeClass("calculate-form_error"):(a.addClass("calculate-form_error"),e.add("checkbox")),s.each(function(t,a){var s=$(a).find($(".calculate-form__input-input"));""===s.val()?($(a).addClass("calculate-form_error"),e.add("input")):$(a).removeClass("calculate-form_error")}),""===$(".calculate-form__message-textarea").val()?($(".calculate-form__message-textarea").addClass("calculate-form_error"),e.add("textarea")):$(".calculate-form__message-textarea").removeClass("calculate-form_error"),o.each(function(t,a){$(a).find($(".calculate-form__input-input"));""===$(a).val()?($(a).addClass("calculate-form_error"),e.add("input")):$(a).removeClass("calculate-form_error")}),!e.size}function n(e){$(".overlay").addClass("overlay_active"),e.addClass("modal_active")}s([$(".services__service"),$(".objects__slide"),$(".articles__slide"),$(".products__card"),$(".cart-list__card")],"hovered"),$(".header__burger").on("click",function(){$(".header__menu").addClass("header__menu_mobile-active")}),$(".mobile-menu__close").on("click",function(){$(".header__menu").removeClass("header__menu_mobile-active")}),$(".calculate-form__radio-input-container").on("click",function(){$(this).addClass("calculate-form__input-container_checked"),$(this).find("input").attr("checked","checked"),$(this).siblings(".calculate-form__radio-input-container").removeClass("calculate-form__input-container_checked"),$(this).siblings(".calculate-form__radio-input-container").find("input").removeAttr("checked")}),$(".calculate-form__checkbox-label").on("click",function(){$(this).prev("input").attr("checked")?($(this).prev("input").removeAttr("checked","checked"),$(this).parent().removeClass("calculate-form__input-container_checked")):($(this).prev("input").attr("checked","checked"),$(this).parent().addClass("calculate-form__input-container_checked"))}),$(".calculate-form__checkbox-input-container").on("click",function(){$(this).find("input").attr("checked")?($(this).find("input").removeAttr("checked","checked"),$(this).removeClass("calculate-form__input-container_checked")):($(this).find("input").attr("checked","checked"),$(this).addClass("calculate-form__input-container_checked"))}),$(".calculate__btn").on("click",function(e){e.preventDefault(),$(".calculate").hasClass("calculate_nonabsolute")&&($(".calculate").addClass("calculate_active-form"),$("html, body").animate({scrollTop:$(".calculate__form").offset().top},500)),$(".calculate__form").addClass("calculate__form_active"),$(".calculate-form__tab:first").addClass("calculate-form__tab_active"),$(".calculate-form:first").addClass("calculate-form_active")}),$(".calculate-form__back-btn, .calculate-form__cancel").on("click",function(){$(".calculate").removeClass("calculate_active-form"),$(".calculate__form").removeClass("calculate__form_active"),$(".calculate-form__tab").removeClass("calculate-form__tab_active"),$(".calculate-form").removeClass("calculate-form_active"),setTimeout(function(){$(".calculate-form__content").removeClass("calculate-form__content_autoheight")},100)}),$(".calculate-form__fields_physical").on("submit",function(e){var t=this;e.preventDefault();var a=$(this).serializeArray();l($(this))&&$.ajax({type:"POST",dataType:"json",data:a,url:"http://vodprom.asap-lp.ru/php/mail_vodoprom_for_individuals.php",beforeSend:function(){$(".calculate-form__send-btn_physical").attr("disabled","disabled"),$(".calculate-form__content-error").removeClass("calculate-form__content-error_active")},success:function(){$(".calculate-form__send-btn_physical").removeAttr("disabled"),n($(".modal_success")),$(".calculate-form__radio-input-container").removeClass("calculate-form__input-container_checked"),$(".calculate-form__checkbox-input-container").removeClass("calculate-form__input-container_checked"),$(".calculate-form__checkbox-input").removeAttr("checked"),$(t)[0].reset(),setTimeout(function(){$(".modal_success").removeClass("modal_active"),$(".overlay").removeClass("overlay_active")},2e3)},error:function(e){$(".calculate-form__content-error").addClass("calculate-form__content-error_active"),$(".calculate-form__send-btn_physical").removeAttr("disabled"),console.log(e)}})}),$(".modal__close").on("click",function(){$(this).closest(".modal").removeClass("modal_active"),$(".overlay").removeClass("overlay_active")}),$(".overlay").on("click",function(){$(".overlay").removeClass("overlay_active"),$(".modal").removeClass("modal_active")}),$(".calculate-form__tab_legal").on("click",function(){$(this).addClass("calculate-form__tab_active"),$(this).siblings().removeClass("calculate-form__tab_active"),$(".calculate-form__fields_physical").removeClass("calculate-form_active"),$(".calculate-form__fields_legal").addClass("calculate-form_active"),$(window).width()<860&&$(".calculate-form__content").addClass("calculate-form__content_autoheight")}),$(".calculate-form__tab_physical").on("click",function(){$(this).addClass("calculate-form__tab_active"),$(this).siblings().removeClass("calculate-form__tab_active"),$(".calculate-form__fields_legal").removeClass("calculate-form_active"),$(".calculate-form__fields_physical").addClass("calculate-form_active"),$(".calculate-form__content").removeClass("calculate-form__content_autoheight")}),$(".calculate-form__mobile-tab").on("click",function(){$(this).hasClass("calculate-form__mobile-tab_active")||($(this).siblings().removeClass("calculate-form__mobile-tab_active"),$(this).addClass("calculate-form__mobile-tab_active"),$(this).hasClass("calculate-form__mobile-tab_legal")?($(".calculate-form__content").addClass("calculate-form__content_autoheight"),$(".calculate-form__fields_legal").addClass("calculate-form_active").siblings().removeClass("calculate-form_active")):($(".calculate-form__content").removeClass("calculate-form__content_autoheight"),$(".calculate-form__fields_physical").addClass("calculate-form_active").siblings().removeClass("calculate-form_active"))),$(".calculate-form__mobile-tabs").toggleClass("calculate-form__mobile-tabs_active")}),$(".short-header__tab").on("click",function(){$(this).parent().find(".short-header__tab").siblings().removeClass("short-header__tab_active"),$(this).addClass("short-header__tab_active"),$(".services-tab-content, .projects-tab-content, .products-tab-content").fadeOut(),$(this).hasClass("short-header__tab_physical")&&$(".services-tab-content_physical").fadeIn(),$(this).hasClass("short-header__tab_legal")&&($(".services-tab-content_legal").fadeIn(),$(".objects__slider").slick("refresh")),$(this).hasClass("short-header__tab_industrial")&&($(".projects-tab-content_industrial").length?$(".projects-tab-content_industrial").fadeIn():$(".products-tab-content_industrial").fadeIn()),$(this).hasClass("short-header__tab_private")&&($(".projects-tab-content_private").length?$(".projects-tab-content_private").fadeIn():$(".products-tab-content_private").fadeIn()),$(this).hasClass("short-header__tab_goods")&&($(".cart-list").removeClass("cart-list_active"),$(".cart-list_goods").length?$(".cart-list_goods").addClass("cart-list_active"):$(".cart-list_services").addClass("cart-list_active")),$(this).hasClass("short-header__tab_services")&&($(".cart-list").removeClass("cart-list_active"),$(".cart-list_services").length?$(".cart-list_services").addClass("cart-list_active"):$(".cart-list_goods").addClass("cart-list_active"))}),$(window).width()<640&&$(".short-header__tabs").length&&e(),$(window).on("resize",function(){a(),$(window).width()<640&&e()}),o(".objects__slide-desc",150),o(".service__desc",140),o(".articles__slide-desc",210),o(".feedback__slide-message",700),o(".projects-list__card-text",150),o(".articles-list__article-desc",115),o(".articles-list__article-title",80),o(".more-articles__slide-desc",150),$(".back-btn").on("click",function(){history.back()}),$("#map").length&&c();var _=0;if($(window).scroll(function(){var e=$(window).scrollTop();e>60&&e>_?($(".header__menu").removeClass("header__menu_mobile-active"),$(".header__menu").addClass("header__menu_hidden")):$(".header__menu").removeClass("header__menu_hidden"),_=e}),$(".make-order__input").on("focus",function(){$(this).removeClass("make-order__input_error")}),$(".make-order__policy-label").on("click",function(){$(".make-order__policy").removeClass("make-order__input_error"),document.querySelector(".make-order__policy").checked?$(this).parent().removeClass("make-order__checkbox-container_checked"):$(this).parent().addClass("make-order__checkbox-container_checked")}),$(".modal-form__input").on("focus",function(){$(this).removeClass("modal-form__input_error")}),$(".rates__card-order, .pricelist__btn, .service__btn").on("click",function(){n($(".modal_order"));var e=$(".modal_order").find(".modal-form__input_service");$(this).hasClass("rates__card-order")&&e.attr("value",$(this).closest(".rates__card").find(".rates__card-title").text()),$(this).hasClass("pricelist__btn")&&e.attr("value",$(this).closest(".pricelist__table-row").find(".pricelist__service").text()),$(this).hasClass("service__btn")&&e.attr("value",$(this).closest(".services__service").find(".service__title").text())}),$(".modal_order").length){var d=document.querySelector(".modal__form_order");d.addEventListener("change",function(e){"file"===e.target.getAttribute("type")&&$(".modal-form__docs-count").text("Загружено ".concat(e.target.files.length," файла(ов)"))}),d.addEventListener("submit",function(e){e.preventDefault(),formValidate({form:d,url:"YOUR URL",errorClass:"modal-form__input_error",onLoadStart:function(){console.log("load start")},onSuccess:function(){console.log("success")},onError:function(){console.log("error")}})})}if($(".objects__slider").length&&$(".objects__slider").slick({slidesToShow:3,slidesToScroll:1,infinite:!1,arrows:!0,prevArrow:$(".objects__nav-arr_left"),nextArrow:$(".objects__nav-arr_right"),responsive:[{breakpoint:1030,settings:{slidesToShow:2.3}},{breakpoint:640,settings:{slidesToShow:1.5}},{breakpoint:565,settings:{slidesToShow:1.2}},{breakpoint:375,settings:{slidesToShow:1}}]}),$(".video__video").length){a();var u=$(".video__video").attr("data-src"),f=i(u),m=r(f);$(".video__thumb").css({"background-image":"url(".concat(m)}),$(".video__video").on("click",function(){var e=$(".video__video").attr("data-src"),t=i(e);$(".video__video").append('<iframe class="video__iframe" src="'.concat(t,'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>')),$(".video__playbtn").css({opacity:0,visibility:"hidden"})}),$(".services__slider").slick({slidesToShow:4,slidesToScroll:1,infinite:!1,arrows:!0,prevArrow:$(".services__nav-arr_left"),nextArrow:$(".services__nav-arr_right"),responsive:[{breakpoint:1280,settings:{slidesToShow:3}},{breakpoint:860,settings:{slidesToShow:2.3}},{breakpoint:640,settings:{slidesToShow:2.1}},{breakpoint:565,settings:{slidesToShow:1.5}},{breakpoint:375,settings:{slidesToShow:1}}]}),$(".articles__slider").slick({slidesToShow:2.2,slidesToScroll:1,infinite:!1,arrows:!1,responsive:[{breakpoint:860,settings:{slidesToShow:1.2}},{breakpoint:375,settings:{slidesToShow:1}}]})}if($(".tenders__btn").on("click",function(){n($(".modal_tender"))}),$(".modal_tender").length){var h=document.querySelector(".modal__form_tender");h.addEventListener("change",function(e){"file"===e.target.getAttribute("type")&&$(".modal-form__docs-count").text("Загружено ".concat(e.target.files.length," файла(ов)"))}),h.addEventListener("submit",function(e){e.preventDefault(),formValidate({form:h,url:"YOUR URL",errorClass:"modal-form__input_error",onLoadStart:function(){console.log("load start")},onSuccess:function(){console.log("success")},onError:function(){console.log("error")}})})}if($(".projects-list").length){var p={industrialOffset:3};$(".projects__load-btn_industrial").on("click",function(){$.ajax({url:"assets/components/ajax-loading/AJAX.php",type:"GET",dataType:"json",data:{offset:p.industrialOffset},success:function(e){e.success&&(e.html?($(".projects-tab-content_industrial").find(".projects-list__table").append(e.html),p.industrialOffset+=3):$(".projects__load-btn_industrial").hide())}})})}if($(".project__slider").length&&($(".project__slider").on("init",function(e,t){$(".project__slider-total").text(t.slideCount)}),$(".project__slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!1,arrows:!0,prevArrow:$(".project__slider-arr_left"),nextArrow:$(".project__slider-arr_right")}),$(".project__slider").on("afterChange",function(e,t,a){$(".project__slider-cur").text(a+1)}),$(window).width()<640)){var v=$(".project__slider-count");v.detach(),$(".project__slider-arr_left").after(v)}if($(".other-projects__slider").length&&$(".other-projects__slider").slick({slidesToShow:4,slidesToScroll:1,infinite:!1,arrows:!1,responsive:[{breakpoint:860,settings:{slidesToShow:3.1}},{breakpoint:640,settings:{slidesToShow:2.3}},{breakpoint:470,settings:{slidesToShow:1.3}},{breakpoint:375,settings:{slidesToShow:1.2}}]}),$(".products__view-btn").on("click",function(){$(this).siblings().removeClass("products__view-btn_active"),$(this).addClass("products__view-btn_active"),$(this).hasClass("products__view-btn_list")?$(".products__table").addClass("products__table_list"):$(".products__table").removeClass("products__table_list")}),".products__sorting".length){if($(".products__sorting").on("click",function(){$(this).toggleClass("products__sorting_active"),$(".products__filter").removeClass("products__filter_active")}),$(".products__sorting-tab").on("click",function(){if(!$(this).hasClass(".products__sorting-tab_initial")){var e=$(this).detach();$(".products__sorting-tab_initial").remove(),$(".products__sorting").prepend(e),$(this).addClass("products__sorting-tab_active"),$(this).siblings().removeClass("products__sorting-tab_active")}}),$(".products__filter").on("click",function(){$(this).toggleClass("products__filter_active"),$(".products__sorting").removeClass("products__sorting_active")}),$(".products__filter-tab").on("click",function(){if(!$(this).hasClass(".products__filter-tab_initial")){var e=$(this).detach();$(".products__filter-tab_initial").remove(),$(".products__filter").prepend(e),$(this).addClass("products__filter-tab_active"),$(this).siblings().removeClass("products__filter-tab_active")}}),$(window).width()<860){var b=$(".products__download-btn").detach();$(".products-wrapper").prepend(b)}$(".products__card").on("click",function(e){return $(e.target).hasClass("products__card-order-btn")?(console.log(1),void e.stopPropagation()):void 0})}if($(".articles-list").length&&($(window).width()<640&&o(".articles-list__article-desc",80),$(window).width()<370&&o(".more-articles__slide-desc",120),$(".articles-list__sorting").on("click",function(){$(this).toggleClass("articles-list__sorting_active"),$(".articles-list__filter").removeClass("articles-list__filter_active")}),$(".articles-list__sorting-tab").on("click",function(){if(!$(this).hasClass(".articles-list__sorting-tab_initial")){var e=$(this).detach();$(".articles-list__sorting-tab_initial").remove(),$(".articles-list__sorting").prepend(e),$(this).addClass("articles-list__sorting-tab_active"),$(this).siblings().removeClass("articles-list__sorting-tab_active")}}),$(".articles-list__filter").on("click",function(){$(this).toggleClass("articles-list__filter_active"),$(".articles-list__sorting").removeClass("articles-list__sorting_active")}),$(".articles-list__filter-tab").on("click",function(){if(!$(this).hasClass(".articles-list__filter-tab_initial")){var e=$(this).detach();$(".articles-list__filter-tab_initial").remove(),$(".articles-list__filter").prepend(e),$(this).addClass("articles-list__filter-tab_active"),$(this).siblings().removeClass("articles-list__filter-tab_active")}})),$(".more-articles__slider").length&&$(".more-articles__slider").slick({slidesToShow:4,slidesToScroll:1,infinite:!1,arrows:!0,prevArrow:$(".more-articles__nav-arr_left"),nextArrow:$(".more-articles__nav-arr_right"),responsive:[{breakpoint:1024,settings:{slidesToShow:3.3}},{breakpoint:860,settings:{slidesToShow:2.5}},{breakpoint:640,settings:{slidesToShow:2.3}},{breakpoint:565,settings:{slidesToShow:1.7}},{breakpoint:470,settings:{slidesToShow:1.3}},{breakpoint:375,settings:{slidesToShow:1.2}}]}),$(".more-products__slider").length&&($(".more-products__slider").slick({slidesToShow:4,slidesToScroll:1,infinite:!1,arrows:!1,responsive:[{breakpoint:860,settings:{slidesToShow:3.1}},{breakpoint:640,settings:{slidesToShow:2.3}},{breakpoint:470,settings:{slidesToShow:1.3}},{breakpoint:375,settings:{slidesToShow:1.2}}]}),$(".product-info__full-tab").on("click",function(){$(this).parent().find(".product-info__full-tab").siblings().removeClass("product-info__full-tab_active"),$(this).addClass("product-info__full-tab_active"),$(".product-info__full-tab-content").fadeOut(),$(this).hasClass("product-info__full-tab_features")&&setTimeout(function(){$(".product-info__full-tab-content_features").fadeIn()},200),$(this).hasClass("product-info__full-tab_description")&&setTimeout(function(){$(".product-info__full-tab-content_description").fadeIn()},200)})),$(".about__members-slider").length){var g=function(){$(".brands__slider").slick({slidesToShow:1.3,slidesToScroll:1,infinite:!1,arrows:!1,responsive:[{breakpoint:470,settings:{slidesToShow:1.2}}]})};$(".about__members-slider").on("init",function(e,t){$(".about__members__nav-total").text("0"+t.slideCount)}),$(".docs__license-slider a").simpleLightbox({}),$(window).width()<860&&t(),$(".about__members-slider").slick({slidesToShow:1,slidesToScroll:1,infinite:!1,draggable:!1,arrows:!0,prevArrow:$(".about__members__nav-arr_left"),nextArrow:$(".about__members__nav-arr_right"),responsive:[{breakpoint:860,settings:{draggable:!0}}]}),$(".about__members-slider").on("afterChange",function(e,t,a){$(".about__members__nav-cur").text("0".concat(a+1))}),$(".docs__license-slider").slick({slidesToShow:5,slidesToScroll:1,infinite:!1,arrows:!1,responsive:[{breakpoint:860,settings:{slidesToShow:3.1}},{breakpoint:640,settings:{slidesToShow:2.3}},{breakpoint:470,settings:{slidesToShow:1.8}},{breakpoint:375,settings:{slidesToShow:1.5}}]}),$(".brands__brand").each(function(e,t){$(t).find("img").attr("src")||$(t).addClass("brands__brand_empty")}),$(window).width()<470&&g()}if($(".popup").on("click",function(){$(this).removeClass("popup_active")}),$(".cart").length&&($(".cart").find(".success-order").length>0||$(".cart").find(".alert-warning").length>0?($(".make-order").hide(),$(".footer").css({position:"fixed",bottom:"0",left:"0"})):($(".make-order").show(),$(".footer").css({})),$(".cart-list__card").length)){var k=document.querySelector(".make-order__order-form");k.addEventListener("submit",function(){}),$(".cart-list__card-delete-btn, .cart-list__card-control").on("click",function(e){e.stopPropagation()}),$(".cart-list__card-control_amount").on("focus",function(e){e.preventDefault(),e.stopPropagation()}),$(".cart-list__card-control_plus").on("click",function(){var e=$(this).closest(".cart-list__card-controls").find($(".cart-list__card-control_amount"));console.log(e),e.val(+e.val()+1)}),$(".cart-list__card-control_minus").on("click",function(){var e=$(this).closest(".cart-list__card-controls").find($(".cart-list__card-control_amount"));console.log(e),+e.val()>1&&e.val(+e.val()-1)}),$(".make-order__input").on("focus",function(){$(this).removeClass("make-order__input_error")}),$(".make-order__policy-label").on("click",function(){$(".make-order__policy").removeClass("make-order__input_error"),document.querySelector(".make-order__policy").checked?$(this).parent().removeClass("make-order__checkbox-container_checked"):$(this).parent().addClass("make-order__checkbox-container_checked")})}});